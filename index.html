<!DOCTYPE html>
<html>
<head>
  <title>Intersection Observer Example</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .box {
      height: 200px;
      width: 200px;
      background-color: white;
      border: 1px solid;
      margin-bottom: 20px;
    }
    .box-new {
      background-color: red;
      transform: translate3d(0, 0, 0);
      transition: transform 0.5s ease-in-out;
    }
    .visible {
      background-color: blue !important;
    }
    
    .container {
      position: relative;
      height: 400px;
      overflow: hidden;
    }

    .panel {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 400px;
      transform: translate3d(0, 0, 0);
      transition: transform 0.3s ease-in-out;
      padding: 20px;
      box-sizing: border-box;
    }

    .panel-1 {
      background-color: lightblue;
    }

    .panel-2 {
      background-color: lightgreen;
    }

    .panel-3 {
      background-color: lightpink;
    }

    
  </style>
  <!-- Start VWO Async SmartCode -->
<script type='text/javascript' id='vwoCode'>
window._vwo_code=window._vwo_code || (function() {
var account_id=672178,
version = 1.5,
settings_tolerance=2000,
library_tolerance=2500,
use_existing_jquery=false,
is_spa=1,
hide_element='body',
hide_element_style = 'opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important',
/* DO NOT EDIT BELOW THIS LINE */
f=false,d=document,vwoCodeEl=d.querySelector('#vwoCode'),code={use_existing_jquery:function(){return use_existing_jquery},library_tolerance:function(){return library_tolerance},hide_element_style:function(){return'{'+hide_element_style+'}'},finish:function(){if(!f){f=true;var e=d.getElementById('_vis_opt_path_hides');if(e)e.parentNode.removeChild(e)}},finished:function(){return f},load:function(e){var t=d.createElement('script');t.fetchPriority='high';t.src=e;t.type='text/javascript';t.innerText;t.onerror=function(){_vwo_code.finish()};d.getElementsByTagName('head')[0].appendChild(t)},getVersion:function(){return version},getMatchedCookies:function(e){var t=[];if(document.cookie){t=document.cookie.match(e)||[]}return t},getCombinationCookie:function(){var e=code.getMatchedCookies(/(?:^|;)\s?(_vis_opt_exp_\d+_combi=[^;$]*)/gi);e=e.map(function(e){try{var t=decodeURIComponent(e);if(!/_vis_opt_exp_\d+_combi=(?:\d+,?)+\s*$/.test(t)){return''}return t}catch(e){return''}});var i=[];e.forEach(function(e){var t=e.match(/([\d,]+)/g);t&&i.push(t.join('-'))});return i.join('|')},init:function(){if(d.URL.indexOf('__vwo_disable__')>-1)return;window.settings_timer=setTimeout(function(){_vwo_code.finish()},settings_tolerance);var e=d.createElement('style'),t=hide_element?hide_element+'{'+hide_element_style+'}':'',i=d.getElementsByTagName('head')[0];e.setAttribute('id','_vis_opt_path_hides');vwoCodeEl&&e.setAttribute('nonce',vwoCodeEl.nonce);e.setAttribute('type','text/css');if(e.styleSheet)e.styleSheet.cssText=t;else e.appendChild(d.createTextNode(t));i.appendChild(e);var n=this.getCombinationCookie();this.load('https://dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&f='+ +is_spa+'&vn='+version+(n?'&c='+n:''));return settings_timer}};window._vwo_settings_timer = code.init();return code;}());
</script>
<!-- End VWO Async SmartCode -->
</head>
<body>
 
  <h1>Panel</h1>
  <div class="container">
  <div class="panel panel-1">
    <h2>Panel 1</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sodales enim sit amet ipsum tincidunt, ac sagittis ex pretium. Fusce nec nisi euismod, blandit enim et, commodo sapien. Mauris lacinia nulla sit amet elit blandit consectetur. </p>
  </div>
  <div class="panel panel-2">
    <h2>Panel 2</h2>
    <p>Maecenas eget quam suscipit, lobortis mi ac, congue massa. Duis sollicitudin massa ex, nec commodo orci ornare ac. Fusce nec purus vel mauris commodo imperdiet. Nam vitae sapien ac leo vehicula bibendum. </p>
  </div>
  <div class="panel panel-3">
    <h2>Panel 3</h2>
    <p>Proin rhoncus lobortis est nec facilisis. Sed eu metus non nulla tincidunt maximus vel eu odio. Donec auctor nibh vel est posuere, eu convallis neque tincidunt. Vivamus tristique aliquet enim, in fermentum ipsum maximus vel.</p>
  </div>
</div>

  
  
  <h1>Intersection Observer Example</h1>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box box-new"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>

  <script>
    
    const container = document.querySelector('.container');
const panels = document.querySelectorAll('.panel');
const panelHeight = panels[0].clientHeight;

function setTransform() {
  panels.forEach((panel, index) => {
    const transformValue = `translate3d(0, ${index * panelHeight}px, 0)`;
    panel.style.transform = transformValue;
  });
}

setTransform();

window.addEventListener('resize', () => {
  setTransform();
});

    
    const box = document.querySelector('.box-new');
const windowHeight = window.innerHeight;

function updateBoxPosition() {
  const boxPosition = box.getBoundingClientRect().top;
  const distanceFromTop = boxPosition / windowHeight;
  const translateY = distanceFromTop * -100;
  box.style.transform = `translate3d(0, ${translateY}px, 0)`;
}

window.addEventListener('scroll', updateBoxPosition);
    
    const boxes = document.querySelectorAll('.box');

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.intersectionRatio > 0) {
      entry.target.classList.add('visible');
    } else {
      entry.target.classList.remove('visible');
    }
  });
});

boxes.forEach(box => {
  observer.observe(box);
});

  </script>
</body>
</html>
